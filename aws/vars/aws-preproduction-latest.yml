## Project identifier
project_id: "ansibletraining"

## EC2
ec2_vpc_id: vpc-03fb0cc1119ee0f5e

## Subnets definition
subnets:
    - name: subnet1-az1
      cidr: "172.31.1.0/24"
      az: eu-west-1a

    - name: subnet1-az2
      cidr: "172.31.2.0/24"
      az: eu-west-1b

    - name: subnet1-az3
      cidr: "172.31.3.0/24"
      az: eu-west-1c

## Security groups definition
security_groups:
    - name: http_rule
      description: "HTTP/HTTPS traffic allowed"
      rules:
          - proto: "tcp"
            from_port: "80"
            to_port: "80"
            cidr_ip: "0.0.0.0/0"
            rule_desc: "HTTP traffic enabled - Generated by Ansible"
          - proto: "tcp"
            from_port: "443"
            to_port: "443"
            cidr_ip: "0.0.0.0/0"
            rule_desc: "HTTPS traffic enabled - Generated by Ansible"

    - name: ssh_rule
      description: "SSH traffic allowed"
      rules:
          - proto: "tcp"
            from_port: "22"
            to_port: "22"
            cidr_ip: "0.0.0.0/0"
            rule_desc: "HTTP traffic enabled - Generated by Ansible"

    - name: mysql_rule
      description: "SSH traffic allowed"
      rules:
          - proto: "tcp"
            from_port: "3306"
            to_port: "3306"
            cidr_ip: "0.0.0.0/0"
            rule_desc: "MySQL traffic enabled - Generated by Ansible"

    - name: cluster_rule
      description: "SSH traffic allowed"
      rules:
          - proto: "tcp"
            from_port: "0"
            to_port: "0"
            cidr_ip: "172.31.2.0/24"
            rule_desc: "Tower Cluster traffic enabled - Generated by Ansible"

    - name: data_rule
      description: "SSH traffic allowed"
      rules:
          - proto: "tcp"
            from_port: "5432"
            to_port: "5432"
            cidr_ip: "172.31.2.0/24"
            rule_desc: "MySQL traffic enabled - Generated by Ansible"

    - name: tower_cluster
      description: "Tower Cluster"
      rules:
          - proto: "tcp"
            from_port: "0"
            to_port: "0"
            cidr_ip: "172.31.2.0/24"
            rule_desc: "MySQL traffic enabled - Generated by Ansible"

## Instances definition
instances:
    - name: classroom
      key: ansiblepoc
      ami: ami-097eda8bf988ebf20
      type: t2.micro
      subnet: subnet1-az1
      groups:
        - ssh_rule
        - http_rule
        - mysql_rule

    - name: student01
      key: ansiblepoc
      type: t2.micro
      ami: ami-097eda8bf988ebf20
      subnet: subnet1-az1
      groups:
          - ssh_rule
          - http_rule
          - mysql_rule

    - name: ansibletower001
      key: ansiblepoc
      ami: ami-097eda8bf988ebf20
      type: t2.medium
      subnet: subnet1-az2
      groups:
          - ssh_rule
          - http_rule
          - app_rule
          - tower_cluster

    - name: ansibletower002
      key: ansiblepoc
      ami: ami-097eda8bf988ebf20
      type: t2.medium
      subnet: subnet1-az2
      groups:
          - ssh_rule
          - http_rule
          - app_rule
          - tower_cluster

    - name: ansibletower003
      key: ansiblepoc
      ami: ami-097eda8bf988ebf20
      type: t2.medium
      subnet: subnet1-az2
      groups:
          - ssh_rule
          - http_rule
          - app_rule
          - tower_cluster

    - name: ansibletowerdb001
      key: ansiblepoc
      ami: ami-097eda8bf988ebf20
      type: t2.small
      subnet: subnet1-az3
      groups:
          - ssh_rule
          - data_rule
          - tower_cluster
